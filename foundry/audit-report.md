# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.
# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [High Issues](#high-issues)
  - [H-1: `abi.encodePacked()` Hash Collision](#h-1-abiencodepacked-hash-collision)
  - [H-2: Contract locks Ether without a withdraw function](#h-2-contract-locks-ether-without-a-withdraw-function)
  - [H-3: ETH transferred without address checks](#h-3-eth-transferred-without-address-checks)
  - [H-4: Loop contains `msg.value`](#h-4-loop-contains-msgvalue)
  - [H-5: Reentrancy: State change after external call](#h-5-reentrancy-state-change-after-external-call)
  - [H-6: Weak Randomness](#h-6-weak-randomness)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk](#l-1-centralization-risk)
  - [L-2: Costly operations inside loop](#l-2-costly-operations-inside-loop)
  - [L-3: Empty Block](#l-3-empty-block)
  - [L-4: Large Numeric Literal](#l-4-large-numeric-literal)
  - [L-5: Literal Instead of Constant](#l-5-literal-instead-of-constant)
  - [L-6: Local Variable Shadows State Variable](#l-6-local-variable-shadows-state-variable)
  - [L-7: `nonReentrant` is Not the First Modifier](#l-7-nonreentrant-is-not-the-first-modifier)
  - [L-8: PUSH0 Opcode](#l-8-push0-opcode)
  - [L-9: Loop Contains `require`/`revert`](#l-9-loop-contains-requirerevert)
  - [L-10: Unchecked Return](#l-10-unchecked-return)
  - [L-11: Uninitialized Local Variable](#l-11-uninitialized-local-variable)
  - [L-12: Unsafe `ERC721::_mint()`](#l-12-unsafe-erc721mint)
  - [L-13: Unspecific Solidity Pragma](#l-13-unspecific-solidity-pragma)
  - [L-14: Public Function Not Used Internally](#l-14-public-function-not-used-internally)


# Summary

## Files Summary

| Key | Value |
| --- | --- |
| .sol Files | 12 |
| Total nSLOC | 2040 |


## Files Details

| Filepath | nSLOC |
| --- | --- |
| src/Auction.sol | 389 |
| src/ERC721Collection.sol | 306 |
| src/ERC721CollectionBeacon.sol | 43 |
| src/Factory.sol | 199 |
| src/Marketplace.sol | 522 |
| src/MultisigTimelock.sol | 247 |
| src/Staking.sol | 165 |
| src/SwapAdapter.sol | 29 |
| src/VRFAdapter.sol | 109 |
| src/interfaces/IERC721Collection.sol | 17 |
| src/interfaces/IFactory.sol | 10 |
| src/interfaces/IMultisigTimelock.sol | 4 |
| **Total** | **2040** |


## Issue Summary

| Category | No. of Issues |
| --- | --- |
| High | 6 |
| Low | 14 |


# High Issues

## H-1: `abi.encodePacked()` Hash Collision

abi.encodePacked() should not be used with dynamic types when passing the result to a hash function such as `keccak256()`. Use `abi.encode()` instead which will pad items to 32 bytes, preventing hash collisions: https://docs.soliditylang.org/en/v0.8.13/abi-spec.html#non-standard-packed-mode. (e.g. `abi.encodePacked(0x123,0x456)` => `0x123456` => `abi.encodePacked(0x1,0x23456)`, but `abi.encode(0x123,0x456)` => `0x0...1230...456`). Unless there is a compelling reason, `abi.encode` should be preferred. If there is only one argument to `abi.encodePacked()` it can often be cast to `bytes()` or `bytes32()` instead: https://ethereum.stackexchange.com/questions/30912/how-to-compare-strings-in-solidity#answer-82739. If all arguments are strings and or bytes, `bytes.concat()` should be used instead.

<details><summary>1 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 397](src/ERC721Collection.sol#L397)

	```solidity
	            ? string(abi.encodePacked(baseURI, Strings.toString(_revealedTraitsIndex[tokenId])))
	```

</details>



## H-2: Contract locks Ether without a withdraw function

It appears that the contract includes a payable function to accept Ether but lacks a corresponding function to withdraw it, which leads to the Ether being locked in the contract. To resolve this issue, please implement a public or external function that allows for the withdrawal of Ether from the contract.

<details><summary>2 Found Instances</summary>


- Found in src/Factory.sol [Line: 14](src/Factory.sol#L14)

	```solidity
	contract Factory is Initializable, UUPSUpgradeable, ReentrancyGuard {
	```

- Found in src/VRFAdapter.sol [Line: 15](src/VRFAdapter.sol#L15)

	```solidity
	contract VRFAdapter is Initializable, OwnableUpgradeable, ReentrancyGuard, UUPSUpgradeable {
	```

</details>



## H-3: ETH transferred without address checks

Consider introducing checks for `msg.sender` to ensure the recipient of the money is as intended.

<details><summary>1 Found Instances</summary>


- Found in src/MultisigTimelock.sol [Line: 196](src/MultisigTimelock.sol#L196)

	```solidity
	    function executeTransaction(bytes32 _txId) external payable nonReentrant {
	```

</details>



## H-4: Loop contains `msg.value`

Provide an explicit array of amounts alongside the receivers array, and check that the sum of all amounts matches `msg.value`.

<details><summary>1 Found Instances</summary>


- Found in src/Auction.sol [Line: 219](src/Auction.sol#L219)

	```solidity
	        for (uint256 i = 0; i < bidsLength; ++i) {
	```

</details>



## H-5: Reentrancy: State change after external call

Changing state after an external call can lead to re-entrancy attacks.Use the checks-effects-interactions pattern to avoid this issue.

<details><summary>24 Found Instances</summary>


- Found in src/Auction.sol [Line: 165](src/Auction.sol#L165)

	State is changed at: `_auctionInfo[_auctionCounter] = AuctionInfo({
            seller: msg.sender,
            collectionAddress: collectionAddress,
            tokenId: tokenId,
            price: minimumBid,
            deadline: block.timestamp + duration
        })`, `_auctionCounter++`
	```solidity
	        try _factory.getCollectionAddressById(collectionId) returns (address _collectionAddress) {
	```

- Found in src/Auction.sol [Line: 174](src/Auction.sol#L174)

	State is changed at: `_auctionInfo[_auctionCounter] = AuctionInfo({
            seller: msg.sender,
            collectionAddress: collectionAddress,
            tokenId: tokenId,
            price: minimumBid,
            deadline: block.timestamp + duration
        })`, `_auctionCounter++`
	```solidity
	        address owner = collection.ownerOf(tokenId);
	```

- Found in src/Auction.sol [Line: 177](src/Auction.sol#L177)

	State is changed at: `_auctionInfo[_auctionCounter] = AuctionInfo({
            seller: msg.sender,
            collectionAddress: collectionAddress,
            tokenId: tokenId,
            price: minimumBid,
            deadline: block.timestamp + duration
        })`, `_auctionCounter++`
	```solidity
	        collection.safeTransferFrom(msg.sender, address(this), tokenId);
	```

- Found in src/Auction.sol [Line: 264](src/Auction.sol#L264)

	State is changed at: `delete _auctionInfo[auctionId]`
	```solidity
	            collection.safeTransferFrom(address(this), _auctionInfo[auctionId].seller, tokenId);
	```

- Found in src/Auction.sol [Line: 269](src/Auction.sol#L269)

	State is changed at: `delete _auctionInfo[auctionId]`, `_auctionBids[auctionId][maxBidIndex] = _auctionBids[auctionId][length - 1]`, `_auctionBids[auctionId].pop()`, `_auctionBlockedAmount -= maxBid`
	```solidity
	            collection.safeTransferFrom(address(this), _auctionBids[auctionId][maxBidIndex].buyer, tokenId);
	```

- Found in src/Auction.sol [Line: 271](src/Auction.sol#L271)

	State is changed at: `delete _auctionInfo[auctionId]`, `_auctionBids[auctionId][maxBidIndex] = _auctionBids[auctionId][length - 1]`, `_auctionBids[auctionId].pop()`, `_auctionBlockedAmount -= maxBid`
	```solidity
	            (address royaltyReceiver, uint256 royaltyAmount) = IERC2981(_auctionInfo[auctionId].collectionAddress).royaltyInfo(tokenId, maxBid);
	```

- Found in src/Auction.sol [Line: 279](src/Auction.sol#L279)

	State is changed at: `delete _auctionInfo[auctionId]`, `_auctionBids[auctionId][maxBidIndex] = _auctionBids[auctionId][length - 1]`, `_auctionBids[auctionId].pop()`, `_auctionBlockedAmount -= maxBid`
	```solidity
	            (bool successSeller,) = payable(_auctionInfo[auctionId].seller).call{value: sellerProceeds}("");
	```

- Found in src/Auction.sol [Line: 283](src/Auction.sol#L283)

	State is changed at: `delete _auctionInfo[auctionId]`, `_auctionBids[auctionId][maxBidIndex] = _auctionBids[auctionId][length - 1]`, `_auctionBids[auctionId].pop()`, `_auctionBlockedAmount -= maxBid`
	```solidity
	                (bool successRoyaltyReceiver,) = payable(royaltyReceiver).call{value: royaltyAmount}("");
	```

- Found in src/Auction.sol [Line: 288](src/Auction.sol#L288)

	State is changed at: `delete _auctionInfo[auctionId]`, `_auctionBids[auctionId][maxBidIndex] = _auctionBids[auctionId][length - 1]`, `_auctionBids[auctionId].pop()`, `_auctionBlockedAmount -= maxBid`
	```solidity
	                (bool successAuctionFeeReceiver,) = payable(_auctionFeeReceiver).call{value: auctionFeeAmount}("");
	```

- Found in src/Auction.sol [Line: 314](src/Auction.sol#L314)

	State is changed at: `_auctionFinished[auctionId] = true`, `delete _auctionInfo[auctionId]`
	```solidity
	        collection.safeTransferFrom(address(this), _auctionInfo[auctionId].seller, tokenId);
	```

- Found in src/ERC721Collection.sol [Line: 160](src/ERC721Collection.sol#L160)

	State is changed at: `_nextTokenId++`
	```solidity
	        (bool success,) = payable(_paymentReceiver).call{value: msg.value}("");
	```

- Found in src/Marketplace.sol [Line: 239](src/Marketplace.sol#L239)

	State is changed at: `_usedNoncesOrders[order.seller][order.nonce] = true`
	```solidity
	            address owner = collection.ownerOf(order.tokenId);
	```

- Found in src/Marketplace.sol [Line: 241](src/Marketplace.sol#L241)

	State is changed at: `_usedNoncesOrders[order.seller][order.nonce] = true`
	```solidity
	            if (!collection.isTokenApproved(order.tokenId, address(this))) {
	```

- Found in src/Marketplace.sol [Line: 323](src/Marketplace.sol#L323)

	State is changed at: `_usedNoncesOffers[buyer][nonce] = true`
	```solidity
	            if (wethToken.balanceOf(buyer) < price) revert InsufficientPayment();
	```

- Found in src/Marketplace.sol [Line: 324](src/Marketplace.sol#L324)

	State is changed at: `_usedNoncesOffers[buyer][nonce] = true`
	```solidity
	            if (wethToken.allowance(buyer, address(this)) < price) revert InsufficientPayment();
	```

- Found in src/Marketplace.sol [Line: 333](src/Marketplace.sol#L333)

	State is changed at: `_usedNoncesOffers[buyer][nonce] = true`
	```solidity
	            address owner = collection.ownerOf(tokenId);
	```

- Found in src/Marketplace.sol [Line: 342](src/Marketplace.sol#L342)

	State is changed at: `_usedNoncesOffers[buyer][nonce] = true`
	```solidity
	            (royaltyReceiver, royaltyAmount) = IERC2981(collectionAddress).royaltyInfo(tokenId, price);
	```

- Found in src/MultisigTimelock.sol [Line: 212](src/MultisigTimelock.sol#L212)

	State is changed at: `transaction.executed = true`, `_currentExecutingTxId = bytes32(0)`, `delete _queue[_txId]`, `delete _queuedTransactions[_txId]`, `_currentExecutingTxId = bytes32(0)`
	```solidity
	        (bool success,) = target.call{value: value}(data);
	```

- Found in src/Staking.sol [Line: 111](src/Staking.sol#L111)

	State is changed at: `_stakedNFT[collectionAddress][tokenId] = msg.sender`, `_userStakedNFT[msg.sender][collectionAddress][tokenId] = true`, `_userStakedTokens[msg.sender][collectionAddress].push(tokenId)`, `_stakedTimestamp[collectionAddress][tokenId] = block.timestamp`
	```solidity
	        if (collection.ownerOf(tokenId) != msg.sender) revert NotNFTOwner();
	```

- Found in src/Staking.sol [Line: 112](src/Staking.sol#L112)

	State is changed at: `_stakedNFT[collectionAddress][tokenId] = msg.sender`, `_userStakedNFT[msg.sender][collectionAddress][tokenId] = true`, `_userStakedTokens[msg.sender][collectionAddress].push(tokenId)`, `_stakedTimestamp[collectionAddress][tokenId] = block.timestamp`
	```solidity
	        if (!collection.isTokenApproved(tokenId, address(this))) revert NoApprovedForStakingContract();
	```

- Found in src/Staking.sol [Line: 114](src/Staking.sol#L114)

	State is changed at: `_stakedNFT[collectionAddress][tokenId] = msg.sender`, `_userStakedNFT[msg.sender][collectionAddress][tokenId] = true`, `_userStakedTokens[msg.sender][collectionAddress].push(tokenId)`, `_stakedTimestamp[collectionAddress][tokenId] = block.timestamp`
	```solidity
	        collection.safeTransferFrom(msg.sender, address(this), tokenId);
	```

- Found in src/Staking.sol [Line: 134](src/Staking.sol#L134)

	State is changed at: `delete _stakedNFT[collectionAddress][tokenId]`, `delete _userStakedNFT[msg.sender][collectionAddress][tokenId]`, `delete _stakedTimestamp[collectionAddress][tokenId]`, `tokens[i] = tokens[tokens.length - 1]`, `tokens.pop()`
	```solidity
	        address owner = collection.ownerOf(tokenId);
	```

- Found in src/Staking.sol [Line: 149](src/Staking.sol#L149)

	State is changed at: `delete _stakedTimestamp[collectionAddress][tokenId]`
	```solidity
	        collection.safeTransferFrom(address(this), msg.sender, tokenId);
	```

- Found in src/Staking.sol [Line: 157](src/Staking.sol#L157)

	State is changed at: `delete _stakedTimestamp[collectionAddress][tokenId]`
	```solidity
	        (bool success,) = payable(msg.sender).call{value: reward}("");
	```

</details>



## H-6: Weak Randomness

The use of keccak256 hash functions on predictable values like block.timestamp, block.number, or similar data, including modulo operations on these values, should be avoided for generating randomness, as they are easily predictable and manipulable. The `PREVRANDAO` opcode also should not be used as a source of randomness. Instead, utilize Chainlink VRF for cryptographically secure and provably random values to ensure protocol integrity.

<details><summary>2 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 408](src/ERC721Collection.sol#L408)

	```solidity
	            keccak256(
	```

- Found in src/ERC721Collection.sol [Line: 411](src/ERC721Collection.sol#L411)

	```solidity
	                    block.prevrandao,
	```

</details>



# Low Issues

## L-1: Centralization Risk

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>8 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 214](src/ERC721Collection.sol#L214)

	```solidity
	    function setBaseURI(string memory newBaseURI) external onlyOwner {
	```

- Found in src/ERC721Collection.sol [Line: 222](src/ERC721Collection.sol#L222)

	```solidity
	    function setDefaultRoyaltyInfo(address royaltyReceiver, uint96 royaltyFeeNumerator) external onlyOwner {
	```

- Found in src/ERC721Collection.sol [Line: 230](src/ERC721Collection.sol#L230)

	```solidity
	    function setPaymentReceiver(address newPaymentReceiver) external onlyOwner {
	```

- Found in src/ERC721Collection.sol [Line: 238](src/ERC721Collection.sol#L238)

	```solidity
	    function setMintPrice(uint256 newMintPrice) external onlyOwner {
	```

- Found in src/ERC721Collection.sol [Line: 244](src/ERC721Collection.sol#L244)

	```solidity
	    function withdraw() external onlyOwner nonReentrant {
	```

- Found in src/VRFAdapter.sol [Line: 113](src/VRFAdapter.sol#L113)

	```solidity
	    ) external onlyOwner {
	```

- Found in src/VRFAdapter.sol [Line: 128](src/VRFAdapter.sol#L128)

	```solidity
	    function setAuthorizedCollection(address collection, bool authorized) external onlyOwner {
	```

- Found in src/VRFAdapter.sol [Line: 200](src/VRFAdapter.sol#L200)

	```solidity
	    function _authorizeUpgrade(address) internal override onlyOwner {}
	```

</details>



## L-2: Costly operations inside loop

Invoking `SSTORE` operations in loops may waste gas. Use a local variable to hold the loop computation result.

<details><summary>7 Found Instances</summary>


- Found in src/Auction.sol [Line: 219](src/Auction.sol#L219)

	```solidity
	        for (uint256 i = 0; i < bidsLength; ++i) {
	```

- Found in src/Auction.sol [Line: 332](src/Auction.sol#L332)

	```solidity
	        for (uint256 i = 0; i < length; ++i) {
	```

- Found in src/ERC721Collection.sol [Line: 140](src/ERC721Collection.sol#L140)

	```solidity
	            for (uint256 i = _nextTokenId; i < endTokenId; ++i) {
	```

- Found in src/MultisigTimelock.sol [Line: 264](src/MultisigTimelock.sol#L264)

	```solidity
	        for (uint256 i = 0; i < _owners.length; ++i) {
	```

- Found in src/MultisigTimelock.sol [Line: 291](src/MultisigTimelock.sol#L291)

	```solidity
	        for (uint256 i = 0; i < _owners.length; ++i) {
	```

- Found in src/MultisigTimelock.sol [Line: 381](src/MultisigTimelock.sol#L381)

	```solidity
	        for (uint256 i = 0; i < owners.length; ++i) {
	```

- Found in src/Staking.sol [Line: 141](src/Staking.sol#L141)

	```solidity
	        for (uint256 i = 0; i < tokens.length; ++i) {
	```

</details>



## L-3: Empty Block

Consider removing empty blocks.

<details><summary>6 Found Instances</summary>


- Found in src/Auction.sol [Line: 572](src/Auction.sol#L572)

	```solidity
	    function _authorizeUpgrade(address) internal override onlyMultisig {}
	```

- Found in src/ERC721Collection.sol [Line: 440](src/ERC721Collection.sol#L440)

	```solidity
	    function _authorizeUpgrade(address) internal override {}
	```

- Found in src/Factory.sol [Line: 308](src/Factory.sol#L308)

	```solidity
	    function _authorizeUpgrade(address) internal override onlyMultisig {}
	```

- Found in src/Marketplace.sol [Line: 706](src/Marketplace.sol#L706)

	```solidity
	    function _authorizeUpgrade(address) internal override onlyMultisig {}
	```

- Found in src/Staking.sol [Line: 285](src/Staking.sol#L285)

	```solidity
	    function _authorizeUpgrade(address) internal override onlyMultisig {}
	```

- Found in src/VRFAdapter.sol [Line: 200](src/VRFAdapter.sol#L200)

	```solidity
	    function _authorizeUpgrade(address) internal override onlyOwner {}
	```

</details>



## L-4: Large Numeric Literal

Large literal values multiples of 10000 can be replaced with scientific notation.Use `e` notation, for example: `1e18`, instead of its full numeric value.

<details><summary>5 Found Instances</summary>


- Found in src/Auction.sol [Line: 38](src/Auction.sol#L38)

	```solidity
	    uint256 private constant FEE_DENOMINATOR = 10_000;
	```

- Found in src/ERC721Collection.sol [Line: 272](src/ERC721Collection.sol#L272)

	```solidity
	        (address receiver,) = royaltyInfo(type(uint256).max, 10000);
	```

- Found in src/Factory.sol [Line: 36](src/Factory.sol#L36)

	```solidity
	    uint256 public constant MAX_SUPPLY = 20_000;
	```

- Found in src/Factory.sol [Line: 147](src/Factory.sol#L147)

	```solidity
	        if (params.royaltyFeeNumerator > 10000) revert IncorrectRoyaltyFee();
	```

- Found in src/Marketplace.sol [Line: 58](src/Marketplace.sol#L58)

	```solidity
	    uint256 private constant FEE_DENOMINATOR = 10_000;
	```

</details>



## L-5: Literal Instead of Constant

Define and use `constant` variables instead of using literals. If the same constant literal value is used multiple times, create a constant state variable and reference it throughout the contract.

<details><summary>4 Found Instances</summary>


- Found in src/Auction.sol [Line: 140](src/Auction.sol#L140)

	```solidity
	        _minNextBidPercent = 5;
	```

- Found in src/Auction.sol [Line: 412](src/Auction.sol#L412)

	```solidity
	        if (newBidPercent < 5 || newBidPercent > 50) revert InvalidNextBidPercent();
	```

- Found in src/Marketplace.sol [Line: 343](src/Marketplace.sol#L343)

	```solidity
	            uint256 maxRoyaltyAmount = (price * 1000) / FEE_DENOMINATOR;
	```

- Found in src/Marketplace.sol [Line: 681](src/Marketplace.sol#L681)

	```solidity
	        uint256 maxRoyaltyAmount = (price * 1000) / FEE_DENOMINATOR;
	```

</details>



## L-6: Local Variable Shadows State Variable

Rename the local variable that shadows another state variable.

<details><summary>4 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 35](src/ERC721Collection.sol#L35)

	```solidity
	        string revealType;
	```

- Found in src/ERC721Collection.sol [Line: 40](src/ERC721Collection.sol#L40)

	```solidity
	        uint256 maxSupply;
	```

- Found in src/ERC721Collection.sol [Line: 41](src/ERC721Collection.sol#L41)

	```solidity
	        uint256 mintPrice;
	```

- Found in src/ERC721Collection.sol [Line: 42](src/ERC721Collection.sol#L42)

	```solidity
	        uint256 batchMintSupply;
	```

</details>



## L-7: `nonReentrant` is Not the First Modifier

To protect against reentrancy in other modifiers, the `nonReentrant` modifier should be the first modifier in the list of modifiers.

<details><summary>1 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 244](src/ERC721Collection.sol#L244)

	```solidity
	    function withdraw() external onlyOwner nonReentrant {
	```

</details>



## L-8: PUSH0 Opcode

Solc compiler version 0.8.20 switches the default target EVM version to Shanghai, which means that the generated bytecode will include PUSH0 opcodes. Be sure to select the appropriate EVM version in case you intend to deploy on a chain other than mainnet like L2 chains that may not support PUSH0, otherwise deployment of your contracts will fail.

<details><summary>12 Found Instances</summary>


- Found in src/Auction.sol [Line: 2](src/Auction.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/ERC721Collection.sol [Line: 2](src/ERC721Collection.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/ERC721CollectionBeacon.sol [Line: 2](src/ERC721CollectionBeacon.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/Factory.sol [Line: 2](src/Factory.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/Marketplace.sol [Line: 2](src/Marketplace.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/MultisigTimelock.sol [Line: 2](src/MultisigTimelock.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/Staking.sol [Line: 2](src/Staking.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/SwapAdapter.sol [Line: 2](src/SwapAdapter.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/VRFAdapter.sol [Line: 2](src/VRFAdapter.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/interfaces/IERC721Collection.sol [Line: 2](src/interfaces/IERC721Collection.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/interfaces/IFactory.sol [Line: 2](src/interfaces/IFactory.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/interfaces/IMultisigTimelock.sol [Line: 2](src/interfaces/IMultisigTimelock.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

</details>



## L-9: Loop Contains `require`/`revert`

Avoid `require` / `revert` statements in a loop because a single bad item can cause the whole transaction to fail. It's better to forgive on fail and return failed elements post processing of the loop

<details><summary>3 Found Instances</summary>


- Found in src/Auction.sol [Line: 332](src/Auction.sol#L332)

	```solidity
	        for (uint256 i = 0; i < length; ++i) {
	```

- Found in src/ERC721Collection.sol [Line: 140](src/ERC721Collection.sol#L140)

	```solidity
	            for (uint256 i = _nextTokenId; i < endTokenId; ++i) {
	```

- Found in src/MultisigTimelock.sol [Line: 381](src/MultisigTimelock.sol#L381)

	```solidity
	        for (uint256 i = 0; i < owners.length; ++i) {
	```

</details>



## L-10: Unchecked Return

Function returns a value but it is ignored. Consider checking the return value.

<details><summary>1 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 389](src/ERC721Collection.sol#L389)

	```solidity
	        _requireOwned(tokenId);
	```

</details>



## L-11: Uninitialized Local Variable

Initialize all the variables. If a variable is meant to be initialized to zero, explicitly set it to zero to improve code readability.

<details><summary>1 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 420](src/ERC721Collection.sol#L420)

	```solidity
	        uint256 unrevealedCount;
	```

</details>



## L-12: Unsafe `ERC721::_mint()`

Using `ERC721::_mint()` can mint ERC721 tokens to addresses which don't support ERC721 tokens. Use `_safeMint()` instead of `_mint()` for ERC721 tokens.

<details><summary>1 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 143](src/ERC721Collection.sol#L143)

	```solidity
	                _mint(msg.sender, i);
	```

</details>



## L-13: Unspecific Solidity Pragma

Consider using a specific version of Solidity in your contracts instead of a wide version. For example, instead of `pragma solidity ^0.8.0;`, use `pragma solidity 0.8.0;`

<details><summary>12 Found Instances</summary>


- Found in src/Auction.sol [Line: 2](src/Auction.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/ERC721Collection.sol [Line: 2](src/ERC721Collection.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/ERC721CollectionBeacon.sol [Line: 2](src/ERC721CollectionBeacon.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/Factory.sol [Line: 2](src/Factory.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/Marketplace.sol [Line: 2](src/Marketplace.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/MultisigTimelock.sol [Line: 2](src/MultisigTimelock.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/Staking.sol [Line: 2](src/Staking.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/SwapAdapter.sol [Line: 2](src/SwapAdapter.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/VRFAdapter.sol [Line: 2](src/VRFAdapter.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/interfaces/IERC721Collection.sol [Line: 2](src/interfaces/IERC721Collection.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/interfaces/IFactory.sol [Line: 2](src/interfaces/IFactory.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

- Found in src/interfaces/IMultisigTimelock.sol [Line: 2](src/interfaces/IMultisigTimelock.sol#L2)

	```solidity
	pragma solidity ^0.8.24;
	```

</details>



## L-14: Public Function Not Used Internally

If a function is marked public but is not used internally, consider marking it as `external`.

<details><summary>9 Found Instances</summary>


- Found in src/ERC721Collection.sol [Line: 348](src/ERC721Collection.sol#L348)

	```solidity
	    function getRoyaltyByTokenId(uint256 tokenId, uint256 salePrice) public view returns (uint256 royaltyAmount, address royaltyReceiver) {
	```

- Found in src/Factory.sol [Line: 267](src/Factory.sol#L267)

	```solidity
	    function getCollectionOwnerById(uint256 collectionId) public view returns (address) {
	```

- Found in src/Factory.sol [Line: 274](src/Factory.sol#L274)

	```solidity
	    function getCollectionIdByAddress(address collectionAddress) public view returns (uint256) {
	```

- Found in src/Factory.sol [Line: 282](src/Factory.sol#L282)

	```solidity
	    function getCollectionAddressById(uint256 collectionId) public view returns (address) {
	```

- Found in src/Factory.sol [Line: 290](src/Factory.sol#L290)

	```solidity
	    function getAllAddressCollectionIds(address userAddress) public view returns (uint256[] memory) {
	```

- Found in src/Factory.sol [Line: 298](src/Factory.sol#L298)

	```solidity
	    function getAddressCollectionAmount(address userAddress) public view returns (uint256) {
	```

- Found in src/Staking.sol [Line: 260](src/Staking.sol#L260)

	```solidity
	    function getRewardAmount() public view returns (uint256) {
	```

- Found in src/Staking.sol [Line: 267](src/Staking.sol#L267)

	```solidity
	    function getStakedTimestamp(uint256 collectionId, uint256 tokenId) public view returns (uint256) {
	```

- Found in src/Staking.sol [Line: 276](src/Staking.sol#L276)

	```solidity
	    function getUserStakedNFT(address user, address collectionAddress, uint256 tokenId) public view returns (bool) {
	```

</details>



